# Cargo configuration for cass
# https://doc.rust-lang.org/cargo/reference/config.html

[build]
# Use all available CPU cores for parallel compilation
jobs = -1

[env]
# Coverage exclusion patterns for cargo-llvm-cov
# These paths are excluded from coverage reports
CARGO_LLVM_COV_EXCLUDE = "tests/*,**/test*.rs,benches/*"

[target.x86_64-unknown-linux-gnu]
# Linux x86_64: Use LLD for faster linking (available in CI)
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.aarch64-unknown-linux-gnu]
# Linux ARM64: Use LLD for faster linking (available in CI)
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

# macOS targets use the default ld64 linker from Xcode
# LLD is not available by default on macOS and causes build failures
# [target.aarch64-apple-darwin] - uses default linker
# [target.x86_64-apple-darwin] - uses default linker

# Alias for coverage command
[alias]
cov = "llvm-cov --workspace --ignore-filename-regex tests/ --ignore-filename-regex benches/"
cov-html = "llvm-cov --workspace --ignore-filename-regex tests/ --ignore-filename-regex benches/ --html --open"
cov-json = "llvm-cov --workspace --ignore-filename-regex tests/ --ignore-filename-regex benches/ --json"
